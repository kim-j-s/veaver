@@include('head.html',{
    "title":"건강365 | "
})
<!-- <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script> -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@0.7.0"></script>
<body>
    <div class="layer-full-wrap">
        <!-- 헤더영역 -->
        @@include('header02.html',{
            "layertitle":"종합판정"
        })
        <!-- //헤더영역 -->

        <!-- 컨텐츠 영역 -->
        <section class="layer-content">
            <div class="chart-ele">
                <canvas id="canvas"></canvas>
            </div>
        </section>
        <!-- //컨텐츠 영역 -->
    </div>
</body>


<style>
.chart-ele{
    padding: 20px 0;
}
/*
.c3-tooltip-container{

}
.c3-tooltip-container table{
    width: auto;
}
*/
</style>


<script>
$(function(){

    var ctx = document.getElementById("canvas").getContext("2d");

    var data = {
        labels: ['201510', '201703', '201901', '201903', '202010', '202009', '202009'],
        datasets: [
        {
            //data: [10, 9, 8, 7, 6, 5, 4, 3, 2, 1],
            data: [10, 8, 6, 5, 2, 1, 9],
            fill: false,
            borderColor: 'rgba(0, 0, 0, 1)',
            lineTension: 0,
            borderWidth: 1,
        }]
    };

    var options = {
        legend: {
            display: false,
        },
        scales: {
            yAxes: [{
                display: false,
                ticks: {
                    beginAtZero: true,
                    stepSize : 1,
                },
                // 최대값  + 1
                afterDataLimits(scale) {
                    scale.max += 1;
                }
            }]
        },
        layout: {
            // 레이아웃 여백
            padding: {
                top: 50,
                right: 20,
            }
        },
        tooltips: {
            enabled: false,
        },
        
        plugins: {
            datalabels: {
                //align: 'top',



                align: function(context) {
                    var chart = context.chart;
                    var area = chart.chartArea;
                    var meta = chart.getDatasetMeta(context.datasetIndex);

                    // WARNING: meta.data._model is PRIVATE and thus can 
                    // change without notice, breaking code relying on it!
                    var model = meta.data[context.dataIndex]._model;
                    var bottom = Math.min(model.base, area.bottom);
                    var height = bottom - model.y;
                    return height < 50 ? 'end' : 'start'
                },


                
                font: {
                    size: '12',
                    //weight: 'bold',
                },
                borderRadius: 50,

                font: function(context) {
                    var width = context.chart.width;
                    var size = Math.round(width / 32);
                    console.log('width : ' + width);
                    return {
                        size: size,
                        weight: 600
                    };
                },

                color: function(context) {
                    var index = context.dataIndex;
                    var value = context.dataset.data[index];
                    return value == 8 ? '#000000' : '#ffffff';
                },

                backgroundColor: function(context) {
                    var index = context.dataIndex;
                    var value = context.dataset.data[index];
                    return value == 10 ? '#056bff' :
                           value == 9 ? '#0ca6ea' :
                           value == 8 ? '#ffbf00' :
                           value == 7 ? '#ff7300' :
                           value == 6 ? '#0ca6ea' :
                           '#2e4260';
                },

                formatter: function(value, context) {
                    if ( value == 1) { value = '휴무' }
                    if ( value == 2) { value = '단순' }
                    if ( value == 3) { value = '직업' }
                    if ( value == 4) { value = '일반' }
                    if ( value == 5) { value = '유질' }
                    if ( value == 6) { value = '고당' }
                    if ( value == 7) { value = '의심' }
                    if ( value == 8) { value = '주의' }
                    if ( value == 9) { value = '정B' }
                    if ( value == 10) { value = '정A' }
                    return value;
                },
            }
        }
    }

    var myLineChart = new Chart(ctx, {
        type: 'line',
        data: data,
        options: options,
    });

    

})
</script>



</html>